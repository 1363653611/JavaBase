## 底层原理 ##
 * volatile 关键字：保证了共享变量的可见性
 ---
 	1. lock 前缀的指令会引起处理器缓存回写到内存
 	2.  一个处理器缓存的数据回写到内存会引起其他处理器的缓存无效
 	
 * synchronized 原理与实现：
 	- 偏向锁 \ 轻量级锁
 	
 	- 普通方法：----》锁是当前对象
 	- 静态同步方法：--》锁是当前类的class对象
 	- 同步方法块：  --> 锁是同步方法块的（）中的对象
 	
  	-  一个线程访问同步代码块时，必须会获得锁。如果一个线程退出或者抛出异常时，必须释放锁
  	- synchronize 是在jvm的锁的实现原理：JVM基于进入和退出Monitor对象来实现方法同步和代码块同步  -》一个monitorenter 对应 一个monitorexit。（方法运行结束、抛出异常）
  *  对象头
    synchronize 是存在于对象头中的。
    mark word ： 锁状态、对象的hashCode（25bit）对象分代年龄（4bit） 是否是偏向锁（1bit）锁标志位（2bit）
    
 * 锁的升级与对比
 	无锁 -》偏向锁 - 》 轻量级锁 -》重量级锁
 	锁的状态可以升级但是不能降级
 	
 	偏向锁：
 	操作：
 		1.java6 和 java7 默认开启偏向锁。但是会延时几秒钟后才激活。可以关闭延时：-XX:BiasedLockingStartupDelay=0
 		2. 如果确定程序中的锁都存在竞争情况，则可以关闭系统的偏向锁（程序会默认进入轻量级锁状态）。操作参数：XX:-seBiasedLocking=false
 		
  